name: Just_run_that_goddamn_editor

on: workflow_dispatch

jobs:
  run-unity:
    runs-on: self-hosted

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Run Unity Windows build
        shell: powershell
        run: |
          Write-Host "=== Unity run starting ==="

          & T:\UnityEditor\Editors\6000.0.49f1\Editor\Unity.exe `
            -projectPath "$PWD" `
            -logFile -

          $exitCode = $LASTEXITCODE
          Write-Host "=== Unity exited with code $exitCode ==="

          if ($exitCode -ne 0) {
            Write-Error "Unity build failed"
            exit $exitCode
          }